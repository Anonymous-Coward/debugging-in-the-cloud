# Demo

- edit a deployment - say the names deployment, and add this to it:

        spec:
          containers:
           - ...
             command:
             - bash
             args:
             - -c
             - "while true; do sleep 1; echo "."; done"

- also remove any readiness and liveness checks, or else kubernetes calls will fail and the pod will be restarted continuously

- kubernetes will restart the pod, and, once restarted, you'll see its output consists solely of dots, and any calls to the name builder will fail with an error generated by nginx, saying something about a bad gateway:

        curl -k -vvv https://localhost/name-builder/name

- you have effectively caused the pod to execute something else than there was in the `CMD` line of the Dockerfile

Caveat: not usable for container images which have an `ENTRYPOINT` defined which contains something else than a shell, unless you can somehow convince the `ENTRYPOINT` to drop you to a shell and execute something there.

- what you can do now: start the application yourself, with various changes to the command line, do modifications to the environment before starting the application and so on

Caveat: what you'll be able to do inside the container is limited by the permissions for the user under which the application is supposed to run.

- delete the actual application, and copy a new binary into the pod:
	- inside the container for the names deployment:
	
        rm /opt/app/namebuilder-0.0.1-SNAPSHOT.jar

- create a new jar file where the adjective and the noun are prefixed by the letter `T` - compile without tests since this would fail tests otherwise

- copy the new jar file into the pod - execute this from the root of the name-builder Java project:

        kubectl -n name-builder cp <pod name>:/opt/app/namebuilder-0.0.1-SNAPSHOT.jar ./target/namebuilder-0.0.1-SNAPSHOT.jar

- `exec -it` into the pod and:

        cd /opt/app
        ./run.sh

- now, if you run the curl command above again, you'll notice that the T appears in front of both the adjective and the name.

This allows you to iterate quickly through successive versions of your binary without redeploying the entire application or rebuilding the docker image for the pod/container.
